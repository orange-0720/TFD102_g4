<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>良耕野菜</title>
    <link rel="icon" href="./images/logo-02.svg">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="icon" href="./images/logo-02.svg">
    <script src="./js/jquery-3.6.0.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://smtpjs.com/v3/smtp.js"></script>
    <script>
        //AJAX

        //註冊
        function doInsert(){
            $.ajax({            
                method: "POST",
                url: "php/Insert.php",
                data:{ 
                    account: $('#sign_email').val(),
                    pwd : $('#sign_pwd').val(),
                    tel : $('#sign_tel').val(),
                },            
                dataType: "text",
                success: function (response) {
                        alert('註冊成功');
                        window.location.href = './index.html';  
                },
                error: function(exception) {
                    alert("發生錯誤: " + exception.status);
                }
            });
        }

        // 登入
        function Login(){
          $.ajax({
            method: 'POST',
            url: 'php/login.php',
            data:{
              account: $('#login_email').val(),
              pwd : $('#login_pwd').val(),
            },
            dataType: 'json',
            success: function(response) {
                console.log(response);
                if(response == 1){
                    alert('登入成功');
                    window.location.href = './member.html';  
                }else{
                    console.log(response)
                    alert('查無會員')
                }
            },
            error: function(exception) {
                alert("發生錯誤: " + exception.status);
            },
          })
        };
        function forget_pwd(){
          $.ajax({
            method: 'POST',
            url: 'php/forget_pwd.php',
            data:{
              account: $('#pwd_resend').val(),
            },
            dataType: 'json',
            success: function(response) {
                console.log(response);
                if(response === 'yes'){
                    Email.send({
                    Host: "smtp.gmail.com",
                    Username: "goodvegetablebox@gmail.com",
                    Password: "tfd102g4",
                    To: $('#pwd_resend').val(),
                    From: "良耕野菜<goodvegetablebox@gmail.com>",
                    Subject: "良耕野菜",
                    Body: "感謝您使用本網站，您的新密碼為11111111，請使用新密碼重新登入",
                    }).then((message) => alert('已寄出新密碼，請使用新密碼進行登入。並請至會員中心更改密碼'))
                    .then($('.pwd_block').fadeToggle());
                }else{
                    console.log(response)
                    alert('查無此信箱')
                }
            },
            error: function(exception) {
                alert("發生錯誤: " + exception.status);
            },
          })
        };
    </script>
  </head>

  </head>
  <body>
    <header class="header">
      <!-- 手機板header -->
      <div class="fixed_top">
        <div class="fixed_top_logo">
          <a href="./index.html">
            <img src="./images/fixed_top_logo.svg" alt="top_logo">
          </a>
        </div>
        <div class="shop_car">
          <img src="./images/shopping_cart.svg" alt="shopping_cart" />
        </div>
        <div class="ham">
          <div class="ham_top"></div>
          <div class="ham_middle"></div>
          <div class="ham_bottom"></div>
        </div>
      </div>
      <!-- 手機板header結束 -->
      <!-- 桌機板header -->
      <div class="menu_fixed">
        <div class="icon">
          <div class="ham">
            <div class="ham_top"></div>
            <div class="ham_middle"></div>
            <div class="ham_bottom"></div>
          </div>
          <div class="login">
            <a href="./login.html">
              <img src="./images/login_icon.svg" alt="login_icon" />
            </a>
          </div>
          <div class="shop_car">
            <img src="./images/shopping_cart.svg" alt="shopping_cart" />
          </div>
        </div>
      </div>
      <div class="menu">
        <div class="logo_img">
          <a href="./index.html">
            <img src="./images/logo.svg" alt="logo" />
          </a>
        </div>
        <div class="page_list">
          <a href="./event.html">農村體驗</a>
          <a href="./fruit_box.html">客製蔬果箱</a>
          <a href="./game.html">蔬果知識小遊戲</a>
          <a href="./aboutUs.html">關於我們</a>
          <a href="./q_a.html">問與答</a>
          <a href="./shopping_page.html">新鮮蔬果</a>
        </div>
      </div>
      <div class="title">
        <div class="title_btn">
          <button class="comm_us">
            聯絡我們 <img src="./images/cotact_us.svg" width="25px" alt="" />
          </button>
          <a class="buy_now" href="./shopping_page.html">
            立即買<img src="./images/buy_now.svg" width="25px" alt="" />
          </a>
        </div>
      </div>
      <!-- 桌機板header 結束 -->

      <!-- 漢堡彈窗 -->
      <div class="jump_hamburger_block">
        <div class="hamburger_logo">
          <a href="./index.html">
            <img src="./images/logo.svg" alt="logo">
          </a>
        </div>
        <div class="header_nav_block">
          <div class="nav_block_contact">
            <img src="./images/nav_block_pen.svg" >
            聯絡我們
          </div>
          <a class="nav_block_log" href="./login.html">
            <img src="./images/nav_block_log.svg">
            登入註冊
          </a>          
          <div class="nav_right_block">
            <div class="nav_active">
              <a href="./event.html">農村體驗</a>
              <a href="./event_info.html">預約去</a>
            </div>
            <div class="nav_buy_now">
              <a href="./shopping_page.html">立即買</a>
              <a href="./fruit_box.html">客製蔬果箱</a>
              <a href="./shopping_page.html">新鮮蔬果</a>
            </div>
            <div class="nav_knowledge">
              <a href="./game.html">蔬果知識小遊戲</a>
            </div>
          </div>
          <div class="nav_left_block">
            <div class="nav_about_us">
              <a href="./aboutUs.html">關於我們</a>
              <a href="./aboutUs.html">農場介紹</a>
              <a href="./product_introduction.html">生產介紹</a>
            </div>
            <div class="nav_QA">
              <a href="./q_a.html">問與答</a>
            </div>
          </div>
          <img src="./images/header_vegetable.svg" alt="vegetable" class="header_vegetable">
          <img src="./images/header_lemon.svg" alt="vegetable" class="header_lemon">
          <img src="./images/header_kiwi.svg" alt="vegetable" class="header_kiwi">
        </div>
      </div>
      <!-- 漢堡彈窗結束 -->

      <!-- 聯絡我們彈窗 -->
      <div class="index_contact_box">
        <div class="black_block"></div>
        <div class="cotanct_block">
            <div class="contact_block_head">
              <button class="contact_block_Xmark"></button>
            </div>
            <h2>聯絡我們</h2>
            <div class="contact_search_bar">
              <input type="text" id="order_search" placeholder="請輸入訂單編號">
              <button class="search_icon">
                <img src="./images/header_search_icon.svg" alt="search">
              </button>
            </div>
            <h3>若有其他問題可以點擊下方按鈕寄信</h3>
            <div class="mailto_block">
              <a class="contact_mailto" href="mailto:goodvegetablebox@gmail.com">寄送問題</a>
            </div>
        </div>
      </div>
       <!-- 聯絡我們彈窗結束 -->

       <!-- 購物車彈窗  -->
       <div class="header_shopping_cart">
        <button class="cart_close">
          <img src="./images/checkout/X_mark.svg">
        </button>
        <div class="incart_car_block">
          <img src="./images/header_incart.svg" alt="">
        </div>
        <div class="cart_buy_list">
          <span class="cart_nothing">目前購物車空無一物</span>
        </div>
        <div class="incart_total">
          總和
          <span class="cart_total_price">0</span>元
        </div>
        <div class="incart_checkout_block">
          <a class="incart_checkout_btn" href="./checkout.html">結帳去</a>
        </div>
      </div>
      <!-- 購物車彈窗結束  -->
    </header>


    <div class="login_block">
      <div class="form_block">
        <form class="login_form" action="#" method="POST">
          <h3>會員登入</h3>
          <input type="text" placeholder="註冊信箱" id="login_email"/>
          <input type="password" placeholder="會員密碼" id="login_pwd" autocomplete="current_password" />
          <input type="button" value="登入" id="login_btn" />
          <!-- <a href="./member.html" id="login_btn">登入</a> -->
          <div class="login_notice">
            <a id="signup_btn">立即註冊</a>
            <span>|</span>
            <a class="pwd_btn">忘記密碼</a>
          </div>
        </form>

        <!-- 忘記密碼 -->
        <div class="pwd_block">
          <div class="pwd_block_inside">
            <h3>請輸入註冊信箱</h3>
            <input class="pwd_resend" id="pwd_resend" type="text">
            <input class="pwd_resend_btn" type="button" value="送出"/>
            <button class="cancel_btn"><img src="./images/checkout/X_mark.svg" alt=""></button>
          </div>
        </div>
        <!-- 忘記密碼 -->

        <div class="signup_form">
          <h3>會員註冊</h3>
          <form action="">

            <input class="sign_email" type="text" placeholder="註冊信箱" id="sign_email">
            <input class="sign_pwd" type="password" placeholder="會員密碼" id="sign_pwd" autocomplete="new_password">
            <input class="pwd_confirm" type="password" placeholder="密碼確認" autocomplete="new_password">
            <input class="sign_tel" type="text" placeholder="09XX-XXX-XXX" id="sign_tel">
          </form>
          <label>
            <input type="checkbox" id="sign_agree">
            我已閱讀並同意會員條款
          </label>
          <input type="button" value="註冊" id="sign_confirm_btn">
          <div class="signin_notice">
            <a id="change_to_log">已有帳號請按此登入</a>
          </div>
        </div>
      </div>
      
      <!-- 驗證碼彈窗 -->
      <div class="sign_block">
        <div class="sign_block_inside">
          <h3>請輸入驗證碼</h3>
          <input class="sign_confirm" type="text">
          <input class="sign_send_btn" type="submit" value="送出"/>
          <button class="sign_cancel_btn"><img src="./images/checkout/X_mark.svg" alt=""></button>
        </div>
      </div>
      <!-- 驗證碼彈窗 -->

      <div class="login_pic">
        <img id="login_img" src="./images/login&out/login_01.jpg" alt="login_pic"/>
      </div>
    </div>

    <script src="./js/shopping_cart.js"></script>
    <script src="./js/header.js"></script>
    <script src="./js/login.js"></script>
  </body>
</html>
