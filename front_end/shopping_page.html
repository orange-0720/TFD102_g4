<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>良耕野菜-商品一覽</title>
    <link rel="icon" href="../images/logo-02.svg" />
    <link rel="stylesheet" href="../css/style.css" />
    <script src="../js/jquery-3.6.0.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.14/vue.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue-router/3.5.2/vue-router.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
  </head>
  <body onload="ifMember()">
    <header class="header">
      <!-- 手機板header -->
      <div class="fixed_top"></div>
      <!-- 手機板header結束 -->      
      
      <div class="menu_fixed"></div>
      <!-- 右邊固定欄結束 -->
      
      <div class="menu">
        <div class="logo_img">
          <a href="./index.html">
            <img src="../images/logo.svg" alt="logo" />
          </a>
        </div>
        <div class="page_list">
          <a href="./event.html">農村體驗</a>
          <a href="./fruit_box.html">客製蔬果箱</a>
          <a href="./game.html">蔬果知識小遊戲</a>
          <a href="./aboutUs.html">關於我們</a>
          <a href="./q_a.html">問與答</a>
          <a class="on_page" href="./shopping_page.html">新鮮蔬果</a>
        </div>
      </div>
      <div class="title">
        <div class="title_btn">
          <button class="comm_us">
            聯絡我們 <img src="../images/cotact_us.svg" width="25px" alt="" />
          </button>
          <a class="buy_now" href="./shopping_page.html">
            立即買<img src="../images/buy_now.svg" width="25px" alt="" />
          </a>
        </div>
        <div class="title_pic">
          <img
            src="../images/shopping_page/shopping_page01.jpg"
            alt="checkout_pic"
            style="padding-bottom: 100px"
          />
          <span class="bkc_black"></span>
          <h1>商品一覽</h1>
        </div>
      </div>

      <!-- 漢堡彈窗 -->
      <div class="jump_hamburger_block"></div>
      <!-- 漢堡彈窗結束 -->

      <!-- 聯絡我們彈窗 -->
      <div class="index_contact_box"></div>
      <!-- 聯絡我們彈窗結束 -->

      
      <!-- 購物車彈窗  -->
      <div class="cart_bk"></div>
      <div class="header_shopping_cart"></div>
      <!-- 購物車彈窗結束  -->

      <!-- 滾輪  -->
      <div class="scrollbar" id="style-6">
        <div class="force-overflow"></div>
      </div>
    </header>

    <!-- 當頁內容開始 -->
    <div id="shopping_page1">
      <div class="shopping_main_block">
        <!-- 側邊欄開始 -->
        <div class="shopping_nav_block">
          <h2 class="show_out_block">商品一覽</h2>
          <hr />
          <div class="show_box_block">
            <div class="shopping_box_block">
              <h3 class="shopping_box_slide">
                蔬果箱
                <img class="shopping_aside_arrow" src="../images/shopping_page/shopping_arrow_icon.svg" alt="" />
              </h3>
              <div class="shopping_box_link">
                <a v-for="(box,index) in boxs" @click.stop="box_push_into(index)">{{box.PRODUCT_NAME}}</a>
              </div>
            </div>
            <div class="shopping_veg_block">
              <h3 class="shopping_veg_slide">
                蔬菜
                <img class="shopping_aside_arrow" src="../images/shopping_page/shopping_arrow_icon.svg" alt="" />
              </h3>
              <div class="shopping_veg_link">
                <a v-for="(veg,index) in vegs" @click.stop="veg_push_into(index)">{{veg.PRODUCT_NAME}}</a>
              </div>
            </div>
            <div class="shopping_fruit_block">
              <h3 class="shopping_fruit_slide">
                水果
                <img 
                  class="shopping_aside_arrow"
                  src="../images/shopping_page/shopping_arrow_icon.svg"
                  />
              </h3>
              <div class="shopping_fruit_link">
                <a v-for="(fruit,index) in fruits" @click.stop="fruit_push_into(index)">{{fruit.PRODUCT_NAME}}</a>
              </div>
            </div>
            <div class="shopping_customer_block">
              <h3>
                <a href="./fruit_box.html">客製蔬果箱</a>
              </h3>
            </div>
          </div>
        </div>
        <!-- 側邊欄結束 -->
        <router-view></router-view>

        <!-- 按確認購買 購買視窗 -->
        <div class="item_buy">
          <div class="black_black" @click="close_up"></div>
          <div class="shopping_item_block">
            <h4>
              您選的的商品已為您加入購物車
            </h4>
            <input type="button" class="close_up" value="確認" @click="close_up">
          </div>
        </div>
        <!-- 確認購買視窗結束 -->
      </div>
    </div>


    <!-- 當頁內容結束 -->
    <footer class="footer_bg">
      <div class="footer">
        <button class="go_top" id="go_top">
          <img src="../images/top.svg" alt="top">
        </button>
        <div class="footer_logo">
          <a href="./index.html">
            <img src="../images/logo.svg" alt="logo" />
          </a>
        </div>
        <div class="footer_center">
          <h4>電話:02-26938800</h4>
  
          <h5>營業時間: 星期二至星期日(10:00 - 17:00)</h5>
          <h5>※農曆過年假期本農場也公休
            網路接單為24小時</h5>
          <h5>※當日訂單最晚收到17:00</h5>
          <h5>(17:00後下單視為隔日下單)</h5>
          <div class="btn_pos">
            <button class="mail_btn">
              <img src="../images/mail.svg" alt="mail">MAIL
            </button>
          </div>
          <div class="footer_icon">
            <img src="../images/icon-fb.svg" alt="fb">
            <img src="../images/icon-line.svg" alt="line">
            <img src="../images/icon-ig.svg" alt="ig">
          </div>
        </div>
        <div class="footer_right">
          <div class="right_main">
            <a href="./index.html">首頁</a>
            <a href="./event.html">農村體驗</a>
            <a href="./game.html">蔬果知識小遊戲</a>
            <a href="./aboutUs.html">關於我們</a>
            <a href="./q_a.html">問與答</a>
          </div>
          <div class="right_buy">
            <a href="./fruit_box.html">客製蔬果箱</a>
            <a href="./shopping_page.html">蔬菜</a>
            <a href="./shopping_page.html">水果</a>
          </div>
        </div>
      </div>
      <div  style=" text-align: center; padding: 20px 0px;">
        本網站為緯育TibaMe前端設計工程師班第66期第4組學員專題成果作品，本平台僅供學習、展示之用。<br>
        若有侵權疑慮，您可以私訊<a class="text-dark" href="https://www.facebook.com/webindex/">[TibaMe-前端設計工程師養成班]</a>，後續會由專人協助處理。
      </div>
    </footer>

    <script src="../js/right_nav_bar.js"></script>
    <script src="../js/shopping_cart.js"></script>
    <script src="../js/header.js"></script>
    <script src="../js/shopping_page.js"></script>
    <script>
      let shopping_page1 = new Vue({
        el:'#shopping_page1',
        router,
        data:{
          boxs:[],
          vegs:[],
          fruits:[],
        },
        methods: {
          close_up(){
            $('.item_buy').fadeOut();
          },
          box_push_into(index){
            var product_id = parseInt(this.boxs[index].PRODUCT_ID);
            product_id --;
            router.push({path:`/shopping_inside_page/${product_id}`});
            if(window.innerWidth <= 992){
              $('.show_box_block').slideToggle();
              $(".shopping_box_link").slideToggle();
              $('.shopping_box_slide > img').toggleClass('arrow_updown');
            }
          },
          veg_push_into(index){
            var product_id = parseInt(this.vegs[index].PRODUCT_ID);
            product_id --;
            router.push({path:`/shopping_inside_page/${product_id}`});
            if(window.innerWidth <= 992){
              $('.show_box_block').slideToggle();
              $(".shopping_veg_link").slideToggle();
              $('.shopping_veg_slide > img').toggleClass('arrow_updown'); 
            }
          },
          fruit_push_into(index){
            var product_id = parseInt(this.fruits[index].PRODUCT_ID);
            product_id --;
            router.push({path:`/shopping_inside_page/${product_id}`});
            if(window.innerWidth <= 992){
              $('.show_box_block').slideToggle();
              $(".shopping_fruit_link").slideToggle();
              $('.shopping_fruit_slide > img').toggleClass('arrow_updown');
            }
          }
        },
        mounted() {
          axios.post('../php/getProduct.php').then(res =>{
            let response = res.data;
            response.forEach(function(index, i){
                if(index['PRODUCT_TYPE_ID'] == 3){
                  shopping_page1.vegs.push(index);
                }else if(index['PRODUCT_TYPE_ID'] == 2){
                  shopping_page1.fruits.push(index);
                }else{
                  shopping_page1.boxs.push(index);
                }
            });
          })
        },
      });

      // 側邊攔展開
      window.addEventListener('resize',function(){
        if(window.innerWidth >= 992) {
          $('.show_box_block').css("display",'block');  
        }else{
          $('.show_box_block').css("display",'none');  
        }
      })
      
      $(".shopping_box_slide").on("click", function () {
        $(".shopping_box_link").slideToggle();
        $('.shopping_box_slide > img').toggleClass('arrow_updown');
      });

      $(".shopping_veg_block").on("click", function () {
        $(".shopping_veg_link").slideToggle();
        $('.shopping_veg_slide > img').toggleClass('arrow_updown');
      });

      $(".shopping_fruit_block").on("click", function () {
        $(".shopping_fruit_link").slideToggle();
        $('.shopping_fruit_slide > img').toggleClass('arrow_updown');
      });

      $('.show_out_block').on('click',function(){
        if(window.innerWidth <= 992){
          $('.show_box_block').slideToggle();
        }
      })

      

      // 回頁首
      $("#go_top").on("click", function (e) {
        e.preventDefault();
        $("html, body").animate(
          {
            scrollTop: 0,
          },
          750
        );
      });
    </script>
  </body>
</html>
