<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- <link rel="stylesheet" href="/game.css"> -->
    <link rel="icon" href="../images/logo-02.svg" />
    <title>良耕野菜-扭蛋開始頁面</title>
    <link rel="icon" href="../images/logo-02.svg" />
    <link rel="stylesheet" href="../css/style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <script src="../js/jquery-3.6.0.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
  </head>
  <body id="game_page" onload="ifMember()">
    <header class="header">
      <!-- 手機板header -->
      <div class="fixed_top"></div>
      <!-- 手機板header結束 -->
      <div class="menu_fixed"></div>

      <div class="menu">
        <div class="logo_img">
          <a href="./index.html">
            <img src="../images/logo.svg" alt="logo" />
          </a>
        </div>
        <div class="page_list">
          <a href="./event.html">農村體驗</a>
          <a href="./fruit_box.html">客製蔬果箱</a>
          <a class="on_page" href="./game.html">蔬果知識小遊戲</a>
          <a href="./aboutUs.html">關於我們</a>
          <a href="./q_a.html">問與答</a>
          <a href="./shopping_page.html">新鮮蔬果</a>
        </div>
      </div>
      <div class="title">
        <div class="title_btn">
          <button class="comm_us">
            聯絡我們 <img src="../images/cotact_us.svg" width="25px" alt="" />
          </button>
          <a class="buy_now" href="./shopping_page.html">
            立即買<img src="../images/buy_now.svg" width="25px" alt="" />
          </a>
        </div>
        <div class="title_pic">
          <img
            src="../images/member/member_01.jpg"
            alt="checkout_pic"
            style="padding-bottom: 100px"
          />
          <span class="bkc_black"></span>
          <h1>蔬果知識小遊戲</h1>
        </div>
      </div>

      <!-- 漢堡彈窗 -->
      <div class="jump_hamburger_block"></div>
      <!-- 漢堡彈窗結束 -->

      <!-- 聯絡我們彈窗 -->
      <div class="index_contact_box"></div>
      <!-- 聯絡我們彈窗結束 -->

      <!-- 購物車彈窗  -->
      <div class="cart_bk"></div>
      <div class="header_shopping_cart"></div>
      <!-- 購物車彈窗結束  -->
      

      <!-- 滾輪  -->
      <div class="scrollbar" id="style-6">
        <div class="force-overflow"></div>
      </div>
    </header>

    <div id="app">
      <div id="game_title_lottery">
        <h2 class="game_title">蔬果知識小遊戲-轉蛋趣</h2>
      </div>

      <section class="game_play_border_lottery">
        <div id="game_decorate_testNumberCircle_3">
          <h1 id="inside_testNumber">會員扭蛋</h1>
        </div>
        <img src="../images/game/cabage_group.svg" alt="" class="game icon_1" />
        <img src="../images/game/cabage_group.svg" alt="" class="game icon_2" />
        <img src="../images/game/cabage_group.svg" alt="" class="game icon_3" />
        <img src="../images/game/cabage_group.svg" alt="" class="game icon_4" />
        <div
          class="game_test_3"
          :style="randomNumber !== null ? 'height:400px':'' ?'margin-top:6rem':'' "
        >
          <transition>
            <img
              src="../images/game/cooking_nabe_top.png"
              id="cooking_nabe_top"
              v-show="randomNumber === null"
              class="animate__animated animate__bounce animate__infinite	infinite"
            />
          </transition>
          <div
            id="bowl"
            class="animate__animated animate__pulse animate__infinite	infinite"
          >
            <img
              src="../images/game/lottery_Beetroot.svg"
              alt=""
              id="Beetroot"
            />
            <img
              src="../images/game/lottery_Bell pepper.svg"
              alt=""
              id="pepper"
            />
            <img
              src="../images/game/lottery_Chinese cabbage.svg"
              alt=""
              id="cabbage"
            />
            <img src="../images/game/lottery_onion.svg" alt="" id="onion" />
            <img
              src="../images/game/lottery_greenapple.svg"
              alt=""
              id="greenapple"
            />
            <img src="../images/game/lottery_orange.svg" alt="" id="orange" />
            <img src="../images/game/lottery_potato.svg" alt="" id="potato" />
            <img src="../images/game/lottery_pumpkin.svg" alt="" id="pumpkin" />
          </div>
          <transition>
            <img
              src="../images/game/cooking_nabe_bottom.png"
              id="cooking_nabe_bottom"
              v-show="randomNumber === null"
              class="animate__animated animate__bounce animate__infinite	infinite"
            />
          </transition>
        </div>
        <div id="game_question">
          <h2>會員每日小確幸 <br />點擊湯勺，撈出今日會員限定購物金</h2>
        </div>

        <!-- <transition> -->
        <div id="lottery_result" v-show="randomNumber !== null" class="stage">
          <figure class="ball">
            <h1>
              恭喜你獲得購物金<span id="numbers">{{randomNumber+"元"}}</span>
            </h1>
          </figure>
        </div>
        <!-- </transition> -->

        <div
          id="game_bottom_part_lottery"
          :style="randomNumber !== null ? 'margin-top:20px':'' "
        >
          <transition>
            <div id="game_answer" v-show="randomNumber === null">
              <button type="submit" id="submit_11" @click="show_result">
                <div id="action1">點擊</div>
                <img
                  src="../images/game/rightArrow.svg"
                  alt=""
                  id="rightArrow"
                />
              </button>
              <span id="submit_11"
                ><img src="../images/game/cooking_otama.png" alt="" id="start"
              /></span>
            </div>
          </transition>
          <transition>
            <div id="get_coin" v-show="randomNumber">
              <button type="submit" id="submit_12" @click="get_coin()">
                <!-- <button type="submit" id="submit_12" @click="get_coin(200)"> -->
                <div id="action1">查看購物金</div>
                <img
                  src="../images/game/rightArrow.svg"
                  alt=""
                  id="rightArrow"
                />
              </button>
              <span id="submit_12"
                ><img
                  src="../images/game/money_kinbut_texta.png"
                  alt=""
                  id="pig"
                  class="animate__animated animate__headShake animate__infinite	"
              /></span>
            </div>
          </transition>

          <img
            src="../images/game/game_img_Farmer.svg"
            alt=""
            class="decorate icon_11"
            style="top: 0%;left:30%"
          />
        </div>
        <!-- 用js去寫換圖 -->
        <!-- button在外層直接換內層 -->
      </section>
    </div>

    <!-- ==輪波圖== -->

    <section
      id="game_slideshow_step_lottery"
      :style="randomNumber !== null ? 'height:350px':'' "
    >
      <div id="game_slideshow">
        <img
          src="../images/game/game_scroll_1.png"
          class="game_slideshow"
          alt=""
        />
        <img
          src="../images/game/game_scroll_2.png"
          class="game_slideshow"
          alt=""
        />
        <img
          src="../images/game/game_scroll_3.png"
          class="game_slideshow"
          alt=""
        />
        <img
          src="../images/game/game_scroll_4.png"
          class="game_slideshow"
          alt=""
        />
        <img
          src="../images/game/game_scroll_5.png"
          class="game_slideshow"
          alt=""
        />
      </div>
    </section>

    <footer class="footer_bg">
      <div class="footer">
        <button class="go_top" id="go_top">
          <img src="../images/top.svg" alt="top" />
        </button>
        <div class="footer_logo">
          <a href="./index.html">
            <img src="../images/logo.svg" alt="logo" />
          </a>
        </div>
        <div class="footer_center">
          <h4>電話:02-26938800</h4>
          <h5>營業時間: 星期二至星期日(10:00 - 17:00)</h5>
          <h5>※農曆過年假期本農場也公休 網路接單為24小時</h5>
          <h5>※當日訂單最晚收到17:00</h5>
          <h5>(17:00後下單視為隔日下單)</h5>
          <div class="btn_pos">
            <button class="mail_btn">
              <img src="../images/mail.svg" alt="mail" />MAIL
            </button>
          </div>
          <div class="footer_icon">
            <img src="../images/icon-fb.svg" alt="fb" />
            <img src="../images/icon-line.svg" alt="line" />
            <img src="../images/icon-ig.svg" alt="ig" />
          </div>
        </div>
        <div class="footer_right">
          <div class="right_main">
            <a href="./index.html">首頁</a>
            <a href="./event.html">農村體驗</a>
            <a href="./game.html">蔬果知識小遊戲</a>
            <a href="./aboutUs.html">關於我們</a>
            <a href="./q_a.html">問與答</a>
          </div>
          <div class="right_buy">
            <a href="./fruit_box.html">客製蔬果箱</a>
            <a href="./shopping_page.html">蔬菜</a>
            <a href="./shopping_page.html">水果</a>
          </div>
        </div>
      </div>
    </footer>
    <script src="../js/right_nav_bar.js"></script>
    <script src="../js/shopping_cart.js"></script>
    <script src="../js/header.js"></script>
    <script>
      //vue區域
      var app = new Vue({
        el: "#app",
        data: {
          randomNumber: null, //預設null，根據數據的狀態去綁定一些地方
        },
        methods: {
          getRandom(min, max) {
            //樂透數字產生，把程式分開寫比較好閱讀
            return Math.floor(Math.random() * (max - min + 1)) + min;
          },
          final_result() {
            //樂透數字區間,把程式分開寫比較好閱讀
            this.randomNumber = this.getRandom(100, 200);
          },
          show_result() {
            this.final_result();
          },
          get_coin() {
            $.ajax({
              //jQuery-AJAX語法
              method: "POST", //方式
              url: "../php/get_discount.php", //API伺服器
              data: {
                money: this.randomNumber,
              },
              dataType: "text", //傳送的不是JSON檔，用TEXT型態就可以了
              success: function(response) {
                //response是由php回傳
                //更新html內容
                console.log(response);
                window.location.href = "member.html";
                alert("購物金已存入!");
              },
              error: function(exception) {
                //error是代表AJAX response的error
                console.log(exception);
              },
            });
          },
        },
      });
      //==VUE區域==

      //湯勺點擊動畫
      $("button#submit_11").mousedown(function() {
        $("img#start").css(
          "transform",
          " scale(1.5) rotate(1.8turn) rotate(2.4turn) "
        );
        return false;
      });

      $("button#submit_11").click(function() {
        $("#game_question").css("display", "none");
        $(".game_test_3").css("height", "30vh");
        $(".game_test_3").css("margin-top", "9vh");
        $(".game_test_3").css("margin-bottom", "10vh");
        $("#game_bottom_part_lottery").css("height", "150px");
        $(".icon_11").css("display", "none");
        return false;
      });

      $("button#submit_11").click(function() {
        $("#bowl").addClass(
          "animate__animated animate__bounce animate__infinite	infinite"
        );

        // $("#bowl").css("left", "13%");
        // $("#bowl").css("height", "220px");
        // $("#bowl").css("width", "220px");
        // $("#bowl img").css("animation", "none");
        $("img#orange").css("animation-name", "jumpOrange");
        $("img#potato").css("animation-name", "jumpPotato");
        $("img#Beetroot").css("animation-name", "jumpBeetroot");
        $("img#onion").css("animation-name", "jumpOnion");
        $("img#cabbage").css("animation-name", "jumpCabbage");
        $("img#pepper").css("animation-name", "jumpPepper");
        $("img#pumpkin").css("animation-name", "jumpPumpkin");
        $("img#greenapple").css("animation-name", " jumpGreenapple");
        return false;
      });

      //Slider
      $("#game_slideshow").each(function() {
        let slideImgs = $(this).find("img");

        let slideImgsCount = slideImgs.length;
        let currentIndex = 0;
        // .eq(n)第幾個元素，從 0 開始，0 代表第一個。以此類推。
        slideImgs.eq(currentIndex).fadeIn();

        setInterval(showSlider, 4000);

        function showSlider() {
          let nextIndex = (currentIndex + 1) % slideImgsCount;
          slideImgs.eq(currentIndex).fadeOut();
          slideImgs.eq(nextIndex).fadeIn();
          currentIndex = nextIndex;
        }
      });

      // 回頁首
      $("#go_top").on("click", function(e) {
        e.preventDefault();
        $("html, body").animate(
          {
            scrollTop: 0,
          },
          750
        );
      });
    </script>
  </body>
</html>
