<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- <link rel="stylesheet" href="/game.css"> -->
    <link rel="icon" href="./images/logo-02.svg" />
    <title>良耕野菜-小知識通關頁面</title>
    <link rel="icon" href="./images/logo-02.svg" />
    <link rel="stylesheet" href="./css/style.css" />
    <script src="./js/jquery-3.6.0.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
  </head>
  <body id="game_page" onload="ifMember()">
    <header class="header">
      <!-- 手機板header -->
      <div class="fixed_top">
        <div class="fixed_top_logo">
          <a href="./index.html">
            <img src="./images/fixed_top_logo.svg" alt="top_logo" />
          </a>
        </div>
        <div class="shop_car">
          <img src="./images/shopping_cart.svg" alt="shopping_cart" />
        </div>
        <div class="ham">
          <div class="ham_top"></div>
          <div class="ham_middle"></div>
          <div class="ham_bottom"></div>
        </div>
      </div>
      <!-- 手機板header結束 -->
      <div class="menu_fixed">
        <div class="icon">
          <div class="ham">
            <div class="ham_top"></div>
            <div class="ham_middle"></div>
            <div class="ham_bottom"></div>
          </div>
          <div class="login">
            <a href="./login.html">
              <img src="./images/login_icon.svg" alt="login_icon" />
            </a>
          </div>
          <div class="shop_car">
            <img src="./images/shopping_cart.svg" alt="shopping_cart" />
          </div>
        </div>
      </div>
      
    <div class="menu">
      <div class="logo_img">
        <a href="./index.html">
          <img src="./images/logo.svg" alt="logo" />
        </a>
      </div>
      <div class="page_list">
        <a href="./event.html">農村體驗</a>
        <a href="./fruit_box.html">客製蔬果箱</a>
        <a href="./game.html">蔬果知識小遊戲</a>
        <a href="./aboutUs.html">關於我們</a>
        <a href="./q_a.html">問與答</a>
        <a href="./shopping_page.html">新鮮蔬果</a>
      </div>
    </div>
    <div class="title">
      <div class="title_btn">
        <button class="comm_us">
          聯絡我們 <img src="./images/cotact_us.svg" width="25px" alt="" />
        </button>
        <a class="buy_now">
          立即買<img src="./images/buy_now.svg" width="25px" alt="" />
        </a>
      </div>
      <div class="title_pic">
        <img
          src="./images/member/member_01.jpg"
          alt="checkout_pic"
          style="padding-bottom: 100px;"
        />
        <span class="bkc_black"></span>
        <h1>蔬果知識小遊戲</h1>
      </div>

            <!-- 漢堡彈窗 -->
            <div class="jump_hamburger_block">
              <div class="hamburger_logo">
                <a href="./index.html">
                  <img src="./images/logo.svg" alt="logo">
                </a>
              </div>
              <div class="header_nav_block">
                <div class="nav_block_contact">
                  <img src="./images/nav_block_pen.svg" >
                  聯絡我們
                </div>
                <a class="nav_block_log" href="./login.html">
                  <img src="./images/nav_block_log.svg">
                  <span>登入註冊</span>
                </a>          
                <div class="nav_right_block">
                  <div class="nav_active">
                    <a href="./event.html">農村體驗</a>
                    <a href="./event_info.html">預約去</a>
                  </div>
                  <div class="nav_buy_now">
                    <a href="./shopping_page.html">立即買</a>
                    <a href="./fruit_box.html">客製蔬果箱</a>
                    <a href="./shopping_page.html">新鮮蔬果</a>
                  </div>
                  <div class="nav_knowledge">
                    <a href="./game.html">蔬果知識小遊戲</a>
                  </div>
                </div>
                <div class="nav_left_block">
                  <div class="nav_about_us">
                    <a href="./aboutUs.html">關於我們</a>
                    <a href="./aboutUs.html">農場介紹</a>
                    <a href="./product_introduction.html">生產介紹</a>
                  </div>
                  <div class="nav_QA">
                    <a href="./q_a.html">問與答</a>
                  </div>
                </div>
                <img src="./images/header_vegetable.svg" alt="vegetable" class="header_vegetable">
                <img src="./images/header_lemon.svg" alt="vegetable" class="header_lemon">
                <img src="./images/header_kiwi.svg" alt="vegetable" class="header_kiwi">
              </div>
            </div>
            <!-- 漢堡彈窗結束 -->

     <!-- 聯絡我們彈窗 -->
     <div class="index_contact_box">
      <div class="black_block"></div>
      <div class="cotanct_block">
        <div class="contact_block_head">
          <button class="contact_block_Xmark"></button>
        </div>
        <h3>聯絡我們</h3>
        <div class="contact_search_bar">
          <input type="text" id="order_search" placeholder="請輸入訂單編號" />
          <button class="search_icon">
            <img src="./images/header_search_icon.svg" alt="search" />
          </button>
        </div>
        <h3>若有其他問題可以點擊下方按鈕寄信</h3>
        <div class="mailto_block">
          <a class="contact_mailto" href="mailto:goodvegetablebox@gmail.com"
            >寄送問題</a
          >
        </div>
      </div>
    </div>
    <!-- 聯絡我們彈窗結束 -->

     <!-- 購物車彈窗  -->
     <div class="header_shopping_cart">
      <button class="cart_close">
        <img src="./images/checkout/X_mark.svg">
      </button>
      <div class="incart_car_block">
        <img src="./images/header_incart.svg" alt="">
        <h5>Shop Cart</h5>
      </div>
      <div class="cart_buy_list">
        <span class="cart_nothing">目前購物車空無一物</span>
      </div>
      <div class="incart_total">
        總和
        <span class="cart_total_price">0</span>元
        <!-- 手機板結帳去  -->
        <a class="incart_checkout_btn_mobile" href="./checkout.html"><h5>結帳去</h5></a>
      </div>
      <div class="incart_checkout_block">
        <a class="incart_checkout_btn" href="./checkout.html">結帳去</a>
      </div>
    </div>
    <!-- 購物車彈窗結束  -->

         <!-- 滾輪  -->
         <div class="scrollbar" id="style-6">
          <div class="force-overflow"></div>
        </div>

    </header>

    <div id="game_title">
      <h2 class="game_title">蔬果知識小遊戲</h2>
    </div>
    <section id="game_play_border_PassandDefeat">
      <div id="game_decorate_testNumberCircle_2">
        <h1 id="inside_testNumber">過關</h1>
      </div>
      <img src="./images/game/cabage_group.svg" alt="" class="game icon_1" />
      <img src="./images/game/cabage_group.svg" alt="" class="game icon_2" />
      <img src="./images/game/cabage_group.svg" alt="" class="game icon_3" />
      <!-- <img src="./images/game/game_img_Tomato.png" alt="" class="game icon_4" /> -->
      <div id="count"><h1>時間到!</h1></div>
      <div class="game_test_2">
        <img src="./images/game/game_img_Tomato.svg" alt="" id="game_test" />
      </div>
      <div id="game_question" class="animate__animated animate__bounceInDown">
        <h2>
          恭喜!通過了蔬菜們的考驗<br />請註冊會員，或登入會員進行扭蛋遊戲
        </h2>
      </div>
      <div id="game_bottom_part_PassandDefeat">
        <div id="game_answer">
          <button type="submit" id="submit_1" class="green">
            <div id="action1"><a href="member.html">註冊會員</a></div>
            <img src="./images/game/rightArrow.svg" alt="" id="rightArrow" />
          </button>
          <button type="submit" id="submit_2" class="green" onclick="doCheck()">
            <img src="./images/game/leftArrow.svg" alt="" id="leftArrow" />
            <div id="action1">
              登入會員，扭蛋去
            </div>
          </button>
        </div>
        <img
          src="./images/game/game_img_Farmer.svg"
          alt=""
          class="decorate icon_11"
        />
      </div>
      <!-- 用js去寫換圖 -->
      <!-- button在外層直接換內層 -->
    </section>
    
      

    <section id="game_slideshow_step_PassandDefeat">
      <div id="game_slideshow">
        <img
          src="./images/game/game_scroll_1.png"
          class="game_slideshow"
          alt=""
        />
        <img
          src="./images/game/game_scroll_2.png"
          class="game_slideshow"
          alt=""
        />
        <img
          src="./images/game/game_scroll_3.png"
          class="game_slideshow"
          alt=""
        />
        <img
          src="./images/game/game_scroll_4.png"
          class="game_slideshow"
          alt=""
        />
        <img
          src="./images/game/game_scroll_5.png"
          class="game_slideshow"
          alt=""
        />
      </div>
    </section>
    <footer class="footer_bg">
      <div class="footer">
        <button class="go_top" id="go_top">
          <img src="./images/top.svg" alt="top" />
        </button>
        <div class="footer_logo">
          <a href="./index.html">
            <img src="./images/logo.svg" alt="logo" />
          </a>
        </div>
        <div class="footer_center">
          <h4>電話:02-26938800</h4>
          <h5>營業時間: 星期二至星期日(10:00 - 17:00)</h5>
          <h5>※農曆過年假期本農場也公休 網路接單為24小時</h5>
          <h5>※當日訂單最晚收到17:00</h5>
          <h5>(17:00後下單視為隔日下單)</h5>
          <div class="btn_pos">
            <button class="mail_btn">
              <img src="./images/mail.svg" alt="mail">MAIL
            </button>
          </div>
          <div class="footer_icon">
            <img src="./images/icon-fb.svg" alt="fb" />
            <img src="./images/icon-line.svg" alt="line" />
            <img src="./images/icon-ig.svg" alt="ig" />
          </div>
        </div>
        <div class="footer_right">
          <div class="right_main">
            <a href="./index.html">首頁</a>
            <a href="./event.html">農村體驗</a>
            <a href="./game.html">蔬果知識小遊戲</a>
            <a href="./aboutUs.html">關於我們</a>
            <a href="./q_a.html">問與答</a>
          </div>
          <div class="right_buy">
            <a href="./fruit_box.html">客製蔬果箱</a>
            <a href="./shopping_page.html">蔬菜</a>
            <a href="./shopping_page.html">水果</a>
          </div>
        </div>
      </div>
    </footer>
    <script src="./js/shopping_cart.js"></script>
    <script src="./js/header.js"></script>
    <script>
      //AJAX 確認會員資格
      function doCheck(){
        // alert('aaa');
        $.ajax({//jQuery-AJAX語法            
            method: 'POST',//方式
            url: 'php/check_member.php',//API伺服器  
            data:{},
            dataType: 'text', //傳送的不是JSON檔，用TEXT型態就可以了       
            success: function (response) {//response是由php回傳
                //更新html內容
                if(response=="yes"){
                  window.location.href ='./game_page_lotteryStart.html';
                  alert("親愛的會員，歡迎你小試身手來轉蛋");  
                }else if(response=="used"){    
                  // (response=no)
                 window.location.href ='./shopping_page.html';
                 alert("您尚有購物金未使用，請購物"); 
                }else{
                  window.location.href ='./login.html';
                  alert("請先登入會員"); 
                }
                
            },
            error: function(exception) {//error是代表AJAX response的error
                console.log(exception);
            }
        });

      }






      //Slider
      $("#game_slideshow").each(function() {
        let slideImgs = $(this).find("img");

        let slideImgsCount = slideImgs.length;
        let currentIndex = 0;
        // .eq(n)第幾個元素，從 0 開始，0 代表第一個。以此類推。
        slideImgs.eq(currentIndex).fadeIn();

        setInterval(showSlider, 4000);

        function showSlider() {
          let nextIndex = (currentIndex + 1) % slideImgsCount;
          slideImgs.eq(currentIndex).fadeOut();
          slideImgs.eq(nextIndex).fadeIn();
          currentIndex = nextIndex;
        }
      });

      //     // ====以下為共用====
      //     // 控制HEADER裡的黃色NAV區塊
      // var menu = document.getElementsByClassName("menu")[0];
      // document.addEventListener("scroll", function () {
      //   menu.style.top = (0 - (scrollY)) + "px";
      // });

      // // 漢堡選單
      // $('.ham').on("click", function () {
      //   $('.jump_hamburger_block').fadeToggle();
      //   $('.ham_top').toggleClass('ham_top_move');
      //   $('.ham_middle').toggleClass('ham_middle_move')
      //   $('.ham_bottom').toggleClass('ham_bottom_move');
      // })

      //判斷是否登入
      function ifMember(){
        $.ajax({
              method: 'POST',
              url: 'php/ifMember.php',
              data:{},
              dataType: 'text',
              success: function(response) {
                console.log(response);
                if(response == 'yes'){
                  $('.nav_block_log > span').text('會員中心');
                  $('.login').click(function(){
                    window.location.href = 'member.html';
                  });
                }else{
                  $('.login').click(function(){
                    window.location.href = 'login.html';
                  });
                }
              },
              error: function(exception) {
                  console.log(exception)
                  alert("發生錯誤: " + exception.status);
              },
        });  
      }
    

      // 回頁首
      $("#go_top").on("click", function(e) {
        e.preventDefault();
        $("html, body").animate(
          {
            scrollTop: 0,
          },
          750
        );
      });
    </script>
  </body>
</html>
